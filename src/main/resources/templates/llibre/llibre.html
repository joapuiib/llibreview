<!DOCTYPE html>
<html th:replace="~{layouts/layout :: layout(~{::title}, ~{::main})}">
<!--/*@thymesVar id="llibre" type="com.fpmislata.daw1.projectedaw1.domain.entity.Llibre"*/-->
    <head>
        <title th:text="${llibre.getTitol()}"></title>
    </head>
    <body>
        <main class="">
            <h1 class="text-center my-4" th:text="${llibre.getTitol()}"></h1>
            <div class="left-sidebar">
                <div>
                    <img th:src="|/img/llibre/${llibre.getRutaImatge()}|" alt="" class="d-block mx-auto w-100">
                    <div class="mt-3">
                        <div th:replace="~{components/rating :: rating(numberRatings=${llibre.getNombreRatings()}, averageRating=${llibre.getAverageRating()})}"></div>
                    </div>
                    <div class="mt-3" th:unless="${session.user==null}">
                        <div th:replace="~{components/rating :: my-rating(isbn=${llibre.isbn}, rating=${llibre.getRatingFromUser(session.user)?.rating})}" class="mt-5 d-flex justify-content-between align-items-center"></div>
                    </div>
                </div>
                <div>
                    <dl class="llibre-info">
                        <dt>ISBN</dt>
                        <dd th:text="${llibre.isbn}"></dd>
                        <dt>Data de publicació</dt>
                        <dd th:text="${llibre.getPrettyDataPublicacio()}"></dd>
                        <dt>Nombre de pàgines</dt>
                        <dd th:text="${llibre.nombrePagines}"></dd>
                        <dt>Resum</dt>
                        <dd th:text="${llibre.resum}"></dd>
                        <dt>Gèneres</dt>
                        <dd class="d-flex flex-wrap gap-2">
                            <a th:each="genere: ${generes}" th:text="${genere.nom}" th:href="|/genere/${genere.id}|" th:classappend="|genere-${genere.id}|" class="badge genere" style="font-size: 0.8rem"></a>
                        </dd>
                        <dt>Autors</dt>
                        <dd>
                            <div th:replace="~{components/cards :: card-container(cards=${autors}, classes=justify-content-start)}"></div>
                        </dd>
                    </dl>
                </div>
            </div>
        </main>
    </body>
</html>